# 프로젝트 설명
사람들이 성적인 용도로 사용하는 일러스트를 취향에 맞게 직접 ai로 만들고 싶은 사람들이 있지만, 만들기 위해 세팅하는 기술적 역량이 상당히 필요하고 원하는대로 프롬프트를 깎는데에도 상당한 연습과 시행착오가 필요하다. 이 문제를 해결하기 위해 
1. lora, 모델 등 기술적 세부사항을 최대한 숨겨 ux를 일반 대중이 사용하기에 직관적으로 맞추고,
2. 사용자 데이터를 누적시키고 그를 반영해 전문적 프롬프팅을 하는 llm 워크플로우를 이용해 프롬프팅의 문제를 해결하고,
3. one~few step 생성 모델을 사용하는 선택지를 제공해 대기 시간을 대폭 줄인다.
이런 웹 서비스를 구현하는 프로젝트이다.

## 기술 스택
next.js로 front, fastapi로 back. 현재 레포지토리는 front 부분. 
db: supabase
이미지 저장: supabase storage
로그인, 인증: supabase oauth
front deploy: vercel
api 서버: render
llm: gpt api
이미지 생성 모델 워커: vast

### 유의사항 
1. 16.xx 버전이라 기존에 알고있던 문법과 다른 부분이 있다. 문제가 있다면 버전 변화로 인한 차이일 가능성을 염두하고 공식문서를 웹에서 확인하며 개발하도록.
2. wsl의 node.js 버전은 next와 안 맞아서 nvm을 사용해서 버전을 20 이상으로 맞추고 개발해야 함.

# 작업 방식
## 개발문서 관리
개발문서는 반드시 docs 안에만 만들고, 임시방편으로 임시 문서를 만들지 마. 기록이 필요하다면 꼭 필요한 경우에만 정규 문서에 추가하며, 단순히 덧붙이는게 아니라 기존 내용을 업데이트, 추가하며 유지보수해야 해.
### PROJECT.md 활용
PROJECT.md에는 모듈들 사이의 관계를 다루는 highlevel 구조가 담겨있어. 필요할때마다 이 문서를 읽고 각 모듈의 상황을 파악하며 작업해.

## 테스트 코드 관리
모든 테스트 코드는 tests 안에만 만들고, 유닛별로 테스트를 만들고 유지보수하며, 추가적인 테스트가 필요하다면 중복되는 역할의 테스트 코드를 만들지 말고 기존 테스트의 테스트 케이스를 추가한다든가 하는 방식으로 작업해.

## Modular Programming 원칙

1. 프로그램을 작업 단위로 잘게 나누고, 각 모듈의 **역할과 책임을 단일하게 유지**한다.

2. 각 모듈의 **외부 인터페이스(input, output, side effect)는 고정**하고, 내부 구현은 자유롭게 교체할 수 있게 설계한다. 그를 위해 견고하고 치밀하게 각 모듈별로 유닛 테스트를 만들고, 내부 변경이 있어도 기능과 인터페이스는 견고하게 유지됨이 보장되도록 한다.

3. 전체 시스템은 `docs/PROJECT.md`에서:

- 모든 모듈 목록

- 각 모듈의 기능, input/output 정의

- 모듈 간 의존 관계와 호출 흐름

을 빠짐없이 기술하여 문서 레벨에서 완전히 파악 가능하게 만든다.

4. 테스트 코드는 `tests/` 디렉토리 아래에서 모듈 단위로 구성하고,

각 모듈에 대해 **인터페이스 기준 테스트**를 유지하여 내부 구현 변경에도 기능이 깨지지 않도록 보장한다.

5. 개발 문서(`docs/`)는 변경 사항을 누적 기록하는 로그가 아니라,

**항상 최신 스펙을 반영하는 단일 소스**가 되도록 주기적으로 업데이트한다.

6. 새로운 기능을 추가할 때는:

- 먼저 모듈 경계와 인터페이스를 설계하고

- docs/PROJECT.md에 변경된 모듈 단위 사항을 업데이트한 후

- 구현과 테스트를 추가하는 순서를 지킨다.